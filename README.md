# trapolit
基于traefik的灰度与ab实验平台


## 需要实现的功能
### 基本功能
#### 实现与docker进行交互
  - 实现将dockerfile发送到指定docker生成对应的镜像
  - 实现镜像生成容器
  - 实现通过证书crt的形式连接docker
#### 实现与git仓库的交互
  - 能通过git获取对应仓库里的代码
#### 实现动态配置traefik编写traefik对应插件
  - 动态修改配置文件做到在发布工单后将路由转发到新的容器
  - 编写能根据条件做到路由的转发以实现AB与灰度实验
#### 实现可配置化
### 工单平台
  - 能通过发布工单实现部署对应的服务
  - 能通过修改工单实现对应的网关修改
  - 有权限验证功能能追踪对应工单发布人
  - 支持服务回滚 重试等操作
#### 数据模型

## 运行流程
    - 用户提交工单
    - 根据工单的type字段查到对应的process
    - 用户点击开始执行 定时任务获取对应processNode并执行 修改ticket的状态为running
    - 执行失败调用processNode的回滚方法 成功等待用户确认并执行下一个processNode